<html>
    <head>
        <title>Animate progress bar in Sequence</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>Animate progress bar in Sequence - NaVi UI - 2 | Frontend Machine Coding Question</h1>

        <button id="btn">Add Progress Bar</button>
        <div id="root"></div>

        <script>
            (function() {
                console.log('hi');
                document.getElementById('btn').addEventListener('click', add);
                let counter = 0;

                function add() {
                    if(counter === 0) {
                        create();
                    }
                    counter =+ 1;
                }

                function create(n=1) {
                    const root = document.getElementById('root');

                    /* Creating the Progress bar */
                    const elem = document.createElement('div');
                    elem.classList.add('progressBar');
                    elem.style = `transition: width ${n}s ease;`;
                    root.appendChild(elem);

                    /* Timeout for the transition to take effect */
                    setTimeout(() => {
                        elem.classList.add('fullWidth');
                    }, 50);

                    /* Capture Transition end of the Progress bar */
                    elem.addEventListener('transitionend', () => {
                        counter -= 1;

                        if(counter >= 1) {
                            create();
                        }
                    });

                    elem.removeEventListener('transitionend', ()=> {});
                }

            }());
        </script>
    </body>
</html>